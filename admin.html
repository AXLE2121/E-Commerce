<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - ShoeHub</title>
    <link rel="stylesheet" href="styles/style.css">
    <link rel="stylesheet" href="styles/admin.css">
    <link rel="stylesheet" href="styles/logo.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Add Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
    
    <style>
        .url-upload-option {
            margin-bottom: 15px;
        }

        .url-upload-option input[type="url"] {
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .url-upload-option input[type="url"]:focus {
            border-color: #d50000;
            outline: none;
        }

        .url-upload-option small a {
            text-decoration: none;
            font-weight: bold;
        }

        .url-upload-option small a:hover {
            text-decoration: underline;
        }

        .or-separator {
            position: relative;
            margin: 20px 0;
        }

        .or-separator hr {
            border: none;
            height: 1px;
            background-color: #ddd;
        }

        .or-separator span {
            position: relative;
            top: -10px;
            background: white;
            padding: 0 15px;
            color: #666;
            font-size: 14px;
        }

        .file-upload-option button {
            padding: 10px;
            font-size: 14px;
        }

        .image-preview-placeholder {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 200px;
            height: 200px;
            border: 2px dashed #ddd;
            border-radius: 8px;
            color: #999;
        }

        .image-preview-placeholder i {
            font-size: 48px;
            margin-bottom: 10px;
        }

        .image-preview-placeholder p {
            font-size: 14px;
        }
    </style>
</head>
<body>
    <!-- Admin Header -->
    <header class="admin-header">
        <div class="admin-header-top">
            <div class="logo-container">
                <a href="index.html">
                    <img src="images/shoelogo.png" alt="Foot Locker Logo" class="logo-img">
                </a>
                <h1 class="logo">ShoeHub <span class="admin-badge">Admin</span></h1>
            </div>
            
            <div class="admin-user-info">
                <div class="user-info" id="userInfo" style="display: none;">
                    <span class="user-email" id="userEmail"></span>
                    <a href="#" class="auth-btn logout-btn" id="logoutBtn">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </a>
                </div>
                <a href="index.html" class="store-view-btn">
                    <i class="fas fa-store"></i> View Store
                </a>
            </div>
        </div>
        
        <!-- Admin Navigation -->
        <nav class="admin-nav">
            <ul class="admin-nav-list">
                <li><a href="#dashboard" class="admin-nav-link active"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                <li><a href="#products" class="admin-nav-link"><i class="fas fa-shoe-prints"></i> Products</a></li>
                <li><a href="#orders" class="admin-nav-link"><i class="fas fa-shopping-bag"></i> Orders</a></li>

            </ul>
        </nav>
    </header>

    <!-- Main Admin Content -->
    <div class="admin-main-container">
        <!-- Sidebar -->
        <aside class="admin-sidebar">
            <div class="admin-stats">
                <div class="stat-card">
                    <div class="stat-icon" style="background: #4caf50;">
                        <i class="fas fa-box"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="totalProducts">0</h3>
                        <p>Total Products</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon" style="background: #2196f3;">
                        <i class="fas fa-shopping-cart"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="totalOrders">0</h3>
                        <p>Total Orders</p>
                    </div>
                </div>
            </div>
            
            <div class="quick-actions">
                <h3>Quick Actions</h3>
                <button class="quick-action-btn" onclick="showAddProductModal()">
                    <i class="fas fa-plus-circle"></i> Add New Product
                </button>
                <button class="quick-action-btn" onclick="loadProducts()">
                    <i class="fas fa-sync"></i> Refresh Products
                </button>
                <button class="quick-action-btn" onclick="exportProducts()">
                    <i class="fas fa-file-export"></i> Export Data
                </button>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="admin-content">
            <div id="dashboardContent" class="admin-section active">
                <div class="section-header">
                    <h2>Dashboard Overview</h2>
                    <p>Welcome to ShoeHub Admin Panel</p>
                </div>
                
                <div class="recent-activity">
                    <h3>Recent Activity</h3>
                    <div class="activity-list" id="activityList">
                        <!-- Activity items will be loaded here -->
                    </div>
                </div>
                
                <div class="recent-products">
                    <h3>Recently Added Products</h3>
                    <div class="products-table-container">
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Image</th>
                                    <th>Product Name</th>
                                    <th>Brand</th>
                                    <th>Price</th>
                                    <th>Stock</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="recentProductsTable">
                                <!-- Recent products will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Products Management Section -->
            <div id="productsContent" class="admin-section">
                <div class="section-header">
                    <h2>Products Management</h2>
                    <div class="section-actions">
                        <button class="primary-btn" onclick="showAddProductModal()">
                            <i class="fas fa-plus"></i> Add Product
                        </button>
                        <div class="search-box">
                            <input type="text" id="productSearch" placeholder="Search products...">
                            <i class="fas fa-search"></i>
                        </div>
                    </div>
                </div>
                
                <div class="products-table-container">
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th><input type="checkbox" id="selectAll"></th>
                                <th>Image</th>
                                <th>Product Name</th>
                                <th>Brand</th>
                                <th>Category</th>
                                <th>Price</th>
                                <th>Stock</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="productsTable">
                            <!-- All products will be loaded here -->
                        </tbody>
                    </table>
                </div>
                
                <div class="table-footer">
                    <div class="bulk-actions">
                        <select id="bulkAction">
                            <option value="">Bulk Actions</option>
                            <option value="delete">Delete Selected</option>
                            <option value="publish">Publish Selected</option>
                            <option value="unpublish">Unpublish Selected</option>
                        </select>
                        <button class="secondary-btn" onclick="applyBulkAction()">Apply</button>
                    </div>
                    <div class="pagination" id="pagination">
                        <!-- Pagination will be added here -->
                    </div>
                </div>
            </div>

            <!-- Orders Section -->
            <div id="ordersContent" class="admin-section">
                <div class="section-header">
                    <h2>Orders Management</h2>
                </div>
                <div class="orders-table-container">
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>Order ID</th>
                                <th>Customer</th>
                                <th>Date</th>
                                <th>Amount</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="ordersTable">
                            <!-- Orders will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Users Section -->
            <div id="usersContent" class="admin-section">
                <div class="section-header">
                    <h2>Users Management</h2>
                </div>
                <div class="users-table-container">
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>User ID</th>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Role</th>
                                <th>Joined</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="usersTable">
                            <!-- Users will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Analytics Section -->
            <div id="analyticsContent" class="admin-section">
                <div class="section-header">
                    <h2>Analytics Dashboard</h2>
                </div>
                <div class="analytics-charts">
                    <div class="chart-container">
                        <h3>Sales Overview</h3>
                        <canvas id="salesChart"></canvas>
                    </div>
                    <div class="chart-container">
                        <h3>Top Products</h3>
                        <canvas id="productsChart"></canvas>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Add Product Modal -->
    <div class="modal" id="addProductModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add New Product</h3>
                <button class="modal-close" onclick="closeModal('addProductModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="addProductForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Product Name *</label>
                            <input type="text" id="productName" required>
                        </div>
                        <div class="form-group">
                            <label>Brand *</label>
                            <select id="productBrand" required>
                                <option value="">Select Brand</option>
                                <option value="NIKE">NIKE</option>
                                <option value="ADIDAS">ADIDAS</option>
                                <option value="PUMA">PUMA</option>
                                <option value="REEBOK">REEBOK</option>
                                <option value="NEW BALANCE">NEW BALANCE</option>
                                <option value="CONVERSE">CONVERSE</option>
                                <option value="VANS">VANS</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>Category *</label>
                            <select id="productCategory" required>
                                <option value="">Select Category</option>
                                <option value="Running">Running</option>
                                <option value="Basketball">Basketball</option>
                                <option value="Lifestyle">Lifestyle</option>
                                <option value="Training">Training</option>
                                <option value="Sneakers">Sneakers</option>
                                <option value="Casual">Casual</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Gender *</label>
                            <select id="productGender" required>
                                <option value="">Select Gender</option>
                                <option value="Men">Men</option>
                                <option value="Women">Women</option>
                                <option value="Unisex">Unisex</option>
                                <option value="Kids">Kids</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>Price *</label>
                            <input type="number" id="productPrice" step="0.01" min="0" required>
                        </div>
                        <div class="form-group">
                            <label>Stock Quantity *</label>
                            <input type="number" id="productStock" min="0" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Description</label>
                        <textarea id="productDescription" rows="3"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>Product Image *</label>
                        <div class="image-upload-container">
                            <div class="image-preview" id="imagePreview">
                                <div class="image-preview-placeholder">
                                    <i class="fas fa-image"></i>
                                    <p>No image selected</p>
                                </div>
                                <img id="imagePreviewImg" style="display: none; max-width: 200px; max-height: 200px; border-radius: 8px;">
                            </div>
                            <div class="upload-controls">
                                <!-- Option 1: URL Input -->
                                <div class="url-upload-option">
                                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">Option 1: Paste Image URL</label>
                                    <input type="url" 
                                           id="productImageUrl" 
                                           placeholder="https://example.com/image.jpg"
                                           style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; margin-bottom: 10px;"
                                           oninput="previewImageFromUrl(this.value)">
                                    <small style="color: #666; display: block; margin-bottom: 10px;">
                                        Use free image hosting: 
                                        <a href="https://imgbb.com/" target="_blank" style="color: #d50000;">ImgBB</a>, 
                                        <a href="https://postimages.org/" target="_blank" style="color: #d50000;">Postimages</a>, 
                                        <a href="https://imgur.com/" target="_blank" style="color: #d50000;">Imgur</a>
                                    </small>
                                </div>
                                
                                <div class="or-separator" style="text-align: center; margin: 15px 0;">
                                    <span style="background: white; padding: 0 10px; color: #666;">OR</span>
                                    <hr style="border: none; border-top: 1px solid #ddd; margin-top: -8px;">
                                </div>
                                
                                <!-- Option 2: File Upload -->
                                <div class="file-upload-option">
                                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">Option 2: Upload Image</label>
                                    <input type="file" id="productImageFile" accept="image/*" style="display: none;">
                                    <button type="button" class="secondary-btn" onclick="document.getElementById('productImageFile').click()" style="width: 100%;">
                                        <i class="fas fa-upload"></i> Choose Local Image
                                    </button>
                                    <div class="file-info" id="fileInfo" style="margin-top: 10px; font-size: 12px; color: #666;">
                                        Note: File upload will convert image to base64 (max 5MB). For better performance, use URL.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>Sizes (comma separated)</label>
                            <input type="text" id="productSizes" placeholder="7,8,9,10,11,12">
                        </div>
                        <div class="form-group">
                            <label>Colors (comma separated)</label>
                            <input type="text" id="productColors" placeholder="Black,White,Red">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>Rating (0-5)</label>
                            <input type="number" id="productRating" min="0" max="5" step="0.1" value="4.5">
                        </div>
                        <div class="form-group">
                            <label>Review Count</label>
                            <input type="number" id="productReviews" min="0" value="0">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="productFeatured"> 
                            Featured Product
                        </label>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="secondary-btn" onclick="closeModal('addProductModal')">Cancel</button>
                        <button type="submit" class="primary-btn" id="saveProductBtn">Save Product</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Edit Product Modal -->
    <div class="modal" id="editProductModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Edit Product</h3>
                <button class="modal-close" onclick="closeModal('editProductModal')">&times;</button>
            </div>
            <div class="modal-body">
                <!-- Edit form will be loaded here dynamically -->
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div class="modal" id="deleteModal">
        <div class="modal-content small">
            <div class="modal-header">
                <h3>Confirm Delete</h3>
                <button class="modal-close" onclick="closeModal('deleteModal')">&times;</button>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to delete this product? This action cannot be undone.</p>
                <div class="form-actions">
                    <button type="button" class="secondary-btn" onclick="closeModal('deleteModal')">Cancel</button>
                    <button type="button" class="danger-btn" id="confirmDeleteBtn">Delete</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
    </div>

    <!-- JavaScript Files -->
    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCn721TvxMu3R6JX5fpYTXemZPB6alHQX0",
            authDomain: "shoehub-711f9.firebaseapp.com",
            projectId: "shoehub-711f9",
            storageBucket: "shoehub-711f9.firebasestorage.app",
            messagingSenderId: "719905522600",
            appId: "1:719905522600:web:3ad4f4c2213b25a9a5d39d"
        };

        // Initialize Firebase
        if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
        }
    </script>
    <script src="js/admin.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</body>
</html>